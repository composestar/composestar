<?xml version="1.0" encoding="UTF-8"?>
<project name="ComposeStar/StarLight/Compiletime" default="build">

	<condition property="build.core" value="../../Core">
		<and>
			<not><isset property="build.core"/></not>
			<available file="../../../Core/common.xml"/>
		</and>
	</condition>
	
	<import file="${build.core}/common.xml"/>
		
	<echo>Processing: ${ant.project.name} ...</echo>	
	<description>The Compose* StarLight Compiletime</description>

	<target name="clean" depends="init" description="clean the compilation results">
		
		<!-- Java build files -->
		<delete dir="${out.build}"/>
		<delete dir="${out.dist}"/>
		<delete>
			<fileset dir="src">
				<include name="**/*.class"/>
			</fileset>
		</delete>
		
		
	</target>

	
	<target name="init_local" depends="init">
		<mkdir dir="${out.build}"/>
		<mkdir dir="${out.dist}"/>
	</target>
	
	<target name="build" depends="init_local,compile_java,jar,compile_starlight" description="compile the StarLight compiletime"/>
	
	<target name="antlr">
		<!--
		<antlr target="${CSharpDummyGenerator}/Parse/csharp.g" outputdirectory="${CSharpDummyGenerator}/Parse">
			<classpath refid="lib.dotnet"/>
		</antlr>
		-->
	</target>
	
	<target name="compile_java">
		<javac srcdir="Composestar" destdir="${out.build}" classpathref="lib.starlight" source="1.4" target="1.4" debug="${build.debug}" deprecation="${build.debug}">
			<exclude name="**/AssemblyInfo.java"/>
		</javac>
	</target>
			
	<target name="compile_starlight">
		
	</target>	

	<target name="jar">
		<jar destfile="${out.jar.starlight}" basedir="${out.build}" manifest="composestar/MANIFEST.MF"/>
	</target>
		
</project>